{% extends 'base.html' %}
{% block content %}

<div class="container my-5">
  <!-- Heading -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold">
      üì¶ Track Order <span class="text-primary">#{{ order.id }}</span>
    </h3>
    <a href="{% url 'my_orders' %}" class="btn btn-outline-secondary btn-sm">
      ‚Üê Back to Orders
    </a>
  </div>

  <!-- Progress Steps -->
  <div class="d-flex justify-content-between align-items-center mb-5 flex-wrap">
    {% for step in steps %}
      <div class="text-center flex-fill position-relative">
        <!-- Circle -->
        <div class="rounded-circle mx-auto d-flex align-items-center justify-content-center
                    {% if forloop.counter0 <= current_index %}
                      bg-primary text-white
                    {% else %}
                      bg-light border text-muted
                    {% endif %}"
             style="width: 42px; height: 42px; font-weight: 600;">
          {% if forloop.counter0 <= current_index %}
            <i class="bi bi-check-lg"></i>
          {% else %}
            {{ forloop.counter }}
          {% endif %}
        </div>
        <!-- Label -->
        <small class="d-block mt-2 {% if forloop.counter0 <= current_index %}text-primary fw-semibold{% else %}text-muted{% endif %}">
          {{ step|capfirst }}
        </small>

        <!-- Connector line -->
        {% if not forloop.last %}
          <div class="position-absolute top-50 start-100 translate-middle-y w-100"
               style="height:4px;
                      background-color: {% if forloop.counter0 < current_index %}#0d6efd{% else %}#dee2e6{% endif %};">
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  <!-- Order Details -->
  <div class="card border-0 shadow-sm">
    <div class="card-body">
      <h5 class="fw-bold mb-3">Order Summary</h5>
      <div class="row g-3">
        <div class="col-md-6">
          <p><strong>Status:</strong>
            <span class="badge bg-primary">{{ order.status }}</span>
          </p>
          <p><strong>Payment Method:</strong> {{ order.payment_method }}</p>
          <p><strong>Total:</strong> <span class="fw-bold">‚Çπ{{ order.total_price }}</span></p>
        </div>
        <div class="col-md-6">
          <p><strong>Billing Address:</strong></p>
          <p class="mb-0">{{ order.billing_address }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
