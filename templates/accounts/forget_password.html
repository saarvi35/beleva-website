{% extends 'base.html' %}
{% block content %}

<style>
  /* Background */
  .auth-wrap {
    min-height: 100vh;
    background:
      radial-gradient(1200px 600px at -10% -10%, rgba(13,110,253,.12), transparent 60%),
      radial-gradient(1200px 600px at 110% 110%, rgba(214,51,132,.12), transparent 60%),
      linear-gradient(180deg, #f8fafc, #ffffff);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: clamp(16px, 4vw, 32px);
  }

  /* Card */
  .forget-card {
    width: 100%;
    max-width: 420px;
    border: 1px solid rgba(0,0,0,.06);
    border-radius: 16px;
    box-shadow:
      0 12px 30px rgba(0,0,0,.06),
      inset 0 1px 0 rgba(255,255,255,.6);
    background: #fff;
    padding: clamp(20px, 3.5vw, 32px);
    animation: fadeInUp .45s ease;
  }

  .brand-badge {
    width: 64px; height: 64px;
    border-radius: 50%;
    display: grid; place-items: center;
    background: rgba(13,110,253,.12);
    margin: 0 auto 10px;
  }

  .form-control:focus {
    box-shadow: 0 0 0 .2rem rgba(13,110,253,.15);
    border-color: #0d6efd;
  }

  .send-btn {
    background: linear-gradient(90deg, #0d6efd, #5aa5ff);
    border: none;
    border-radius: 10px;
    font-weight: 600;
    transition: transform .15s ease, box-shadow .15s ease;
  }
  .send-btn:hover { transform: translateY(-1px); box-shadow: 0 8px 20px rgba(13,110,253,.25); }
  .send-btn:disabled { opacity: .75; }

  .divider {
    display: flex; align-items: center; gap: 12px; color: #6b7280; font-size: .9rem;
  }
  .divider::before, .divider::after {
    content: ""; flex: 1; height: 1px; background: rgba(0,0,0,.08);
  }

  @keyframes fadeInUp { from {opacity:0; transform: translateY(6px);} to {opacity:1; transform: translateY(0);} }
</style>

<div class="auth-wrap">
  <div class="forget-card">
    <!-- Icon / Brand -->
    <div class="text-center">
      <div class="brand-badge">
        <i class="bi bi-shield-lock-fill text-primary fs-3"></i>
      </div>
      <h4 class="fw-bold mb-1">Forgot Password</h4>
      <p class="text-muted mb-3 small">Enter your registered email and we’ll send you a one-time code.</p>
    </div>


    <form method="POST" id="forgot-form" novalidate class="needs-validation">
      {% csrf_token %}
      <div class="input-group input-group-lg mb-3">
        <span class="input-group-text bg-white border-end-0">
          <i class="bi bi-envelope-fill text-primary"></i>
        </span>
        <input
          type="email"
          class="form-control border-start-0"
          id="email"
          name="email"
          placeholder="name@example.com"
          autocomplete="email"
          required>
        <div class="invalid-feedback">Please enter a valid email address.</div>
      </div>

      <button type="submit" class="btn send-btn text-white w-100 py-2" id="submit-btn">
        <span class="spinner-border spinner-border-sm me-2 d-none" id="spinner" role="status" aria-hidden="true"></span>
        Send OTP
      </button>
    </form>

    <div class="mt-3 text-center">
      <div class="divider my-2">or</div>
      <a href="{% url 'login' %}" class="small text-decoration-none">← Back to Sign in</a>
    </div>
  </div>
</div>

<!-- Small helper script: client-side validation + prevent double submit -->
<script>
  (function() {
    const form = document.getElementById('forgot-form');
    const btn  = document.getElementById('submit-btn');
    const spin = document.getElementById('spinner');

    form.addEventListener('submit', function(e) {
      if (!form.checkValidity()) {
        e.preventDefault(); e.stopPropagation();
      } else {
        btn.disabled = true;
        spin.classList.remove('d-none');
      }
      form.classList.add('was-validated');
    }, false);
  })();
</script>
{% endblock %}
