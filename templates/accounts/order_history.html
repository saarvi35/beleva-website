{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container my-5" style="font-family: 'Playfair Display', serif;">

  <h2 class="fw-bold mb-4 text-center text-uppercase">My Orders</h2>

  {% for order in orders %}
  <div class="card shadow-sm border-0 rounded-3 mb-4">
    <!-- Card Header -->
    <div class="card-header bg-light d-flex flex-wrap justify-content-between align-items-center py-3">
      <div>
        <span class="fw-semibold me-3">ðŸ†” Order #{{ order.id }}</span>
        <span class="badge bg-info text-dark me-2">{{ order.status }}</span>
        <span class="badge bg-secondary">{{ order.payment_method }}</span>
      </div>
      <small class="text-muted">
        Ordered on {{ order.created_at|date:"d M Y H:i" }}
      </small>
    </div>

    <!-- Card Body -->
    <div class="card-body">
      <div class="table-responsive">
        <table class="table align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th>Product</th>
              <th class="text-center">Qty</th>
              <th class="text-end">Price</th>
              <th class="text-center">Action</th>
            </tr>
          </thead>
          <tbody>
            {% for item in order.items.all %}
            <tr>
              <td>
                {{ item.product.product_name }}
              </td>
              <td class="text-center">{{ item.quantity }}</td>
              <td class="text-end">â‚¹{{ item.price }}</td>
              <td class="text-center">
                <a href="{% url 'track_order' order.id %}" class="btn btn-sm btn-outline-dark rounded-pill px-3">
                  Track Order
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Footer -->
    <div class="card-footer bg-white d-flex justify-content-between align-items-center">
      <small class="text-muted">Thank you for shopping with us ðŸ’™</small>
      <a href="{% url 'track_order' order.id %}" class="btn btn-dark btn-sm rounded-pill">Track</a>
    </div>
  </div>
  {% empty %}
  <div class="alert alert-info text-center py-4">
    No past orders found. <a href="/products/" class="alert-link">Shop now</a>
  </div>
  {% endfor %}
</div>

<!-- Custom CSS -->
<style>
  .card {
    transition: transform .2s ease, box-shadow .2s ease;
  }
  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
  }
</style>
{% endblock %}
